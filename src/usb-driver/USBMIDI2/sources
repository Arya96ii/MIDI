TARGETNAME=USBMidi2
TARGETTYPE=DRIVER
TARGET_DESTINATION=retail

KMDF_VERSION_MAJOR=1
KMDF_VERSION_MINOR=25
ACX_VERSION_MAJOR=1

MSC_WARNING_LEVEL=/W4 \
                  /WX

C_DEFINES= $(C_DEFINES) -DUNICODE -D_UNICODE

#_NT_TARGET_VERSION=$(_NT_TARGET_VERSION_LATEST)
_NT_TARGET_VERSION=$(_NT_TARGET_VERSION_WIN10_NI)

PRECOMPILED_CXX = 1
PRECOMPILED_INCLUDE = Pch.h

TARGETLIBS=\
    $(TARGETLIBS) \
    $(ONECORE_EXTERNAL_DDK_LIB_PATH)\ntstrsafe.lib \
    $(ONECORE_EXTERNAL_SDK_LIB_PATH)\libcntpr.lib

INCLUDES=\
    .; \
    $(INCLUDES); \
    $(WDM_INC_PATH); \
    $(WDM_INC_PATH_L); \
    $(PUBLIC_ROOT)\ifskit\inc; \
    $(ONECORE_EXTERNAL_IFSKIT_INC_PATH); \

SOURCES=\
    Driver.cpp \
    Device.cpp \
    Circuit.cpp \
    Stream.cpp \
    StreamEngine.cpp \
    NewDelete.cpp \
    Resources.rc \

#
# INF settings.
#
INFS_KMDF=1
LOC_DRIVER_INFS=\
    USBMidi2.inf \

PASS1_BINPLACE = \
    $(OBJ_PATH)\$(O)\$(TARGETNAME).inf \

MUI_VERIFY_NO_LOC_RESOURCE=1

#
# This sets up the WPP preprocessor and tells it to scan trace.h to find
# the trace function definition that's in there.
#
#RUN_WPP= $(SOURCES) \
#        -km \
#        -DENABLE_WPP_RECORDER=1 \
#        -DENABLE_WPP_TRACE_FILTERING_WITH_WPP_RECORDER=1 \
#        -scan:trace.h \
#        -func:DoTraceLevelMessage(LEVEL,FLAGS,MSG,...) \
#        -p:USBMidi2 \

